<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Angular Accessibility</title>

		<meta name="description" content="Angular Accessibility">
		<meta name="author" content="Marcy Sutton">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link href="https://fonts.googleapis.com/css?family=RobotoDraft:400,500,700,400italic" rel="stylesheet" type="text/css">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/material.css">
		<link rel="stylesheet" href="css/theme/marcysutton.css">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<script src="lib/js/jquery-1.11.1.min.js"></script>

		<!-- If the query includes 'print-pdf', include the PDF print sheet -->
		<script>
			if( window.location.search.match( /print-pdf/gi ) ) {
				var link = document.createElement( 'link' );
				link.rel = 'stylesheet';
				link.type = 'text/css';
				link.href = 'css/print/pdf.css';
				document.getElementsByTagName( 'head' )[0].appendChild( link );
			}
		</script>
		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>
		<h1 class="offscreen">Angular Accessibility by Marcy Sutton</h1>
		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h2>Hello</h2>
					<img src="img/human-robot-communication.jpg" title="Human-to-robot communication at the CSUN 2014 Conference" alt="Human-to-robot communication at the CSUN 2014 Conference">
				</section>

				<!--<section>
					<h2 class="h1-style" style="margin-bottom: 0.25em;">What is Accessibility?</h2>
					<p class="big-italic">Everyone can perceive, understand, navigate, and interact with the Web, and  they can contribute to the Web.</p>
					<aside class="notes">
					<p><a href="http://www.w3.org/WAI/intro/accessibility.php" target="_blank" title="Link opens in a new window">W3C definition</a></p>
					<p>Millions of people have disabilities that affect their use of the Web.</p>
					<p>Web accessibility also benefits people without disabilities.</p>
					<p>Refer to slide #2 about the kinds of apps we build.</p>
					</aside>
				</section>

				<section>
					<h2>Accessibility is about</h2>
					<h3 class="h1-style" style="font-size: 14rem;">PEOPLE.</h3>
				</section>-->

				<section>
					<h2 class="h1-style"><span style="display: block;">Developments in</span>
            Angular.js Accessibility</h2>
					<p>Marcy Sutton, Seattle, USA<br>Developer @Substantial, Angular.js Contributor</p>
					<p><a href="http://marcysutton.github.io/angular-a11y">http://marcysutton.github.io/angular-a11y</a></p>
				</section>

        <section>
          <p><a href="https://twitter.com/pauljadam/status/550822616898863106"><img src="img/angular-textbook.png" style="max-height: 740px;" alt="#AngularJS web apps are never accessible because even the books on it start with inaccessible code samples! Paul J. Adam (@pauljadam) January 2, 2015" class="plain"></a></p>
        </section>

        <section>
          <h2>Anti-patterns</h2>
          <img src="img/angular-docs-input.png" style="max-height: 580px;" alt="" role="presentation">
          <div class="offscreen">
            <h3>Inaccessible input example from Angular.js official docs</h3>
            <code>
              <script>
                angular.module('inputExample', [])
                   .controller('ExampleController', ['$scope', function($scope) {
                     $scope.user = {name: 'guest', last: 'visitor'};
                   }]);
              </script>
              <div ng-controller="ExampleController">
                <form name="myForm">
                  User name: <input type="text" name="userName" ng-model="user.name" required>
                  <span class="error" ng-show="myForm.userName.$error.required">
                    Required!</span><br>
                Last name: <input type="text" name="lastName" ng-model="user.last"
                  ng-minlength="3" ng-maxlength="10">
                <span class="error" ng-show="myForm.lastName.$error.minlength">
                  Too short!</span>
                <span class="error" ng-show="myForm.lastName.$error.maxlength">
                  Too long!</span><br>
              </form>
              <hr>
              <tt>user = {{user}}</tt><br/>
              <tt>myForm.userName.$valid = {{myForm.userName.$valid}}</tt><br>
              <tt>myForm.userName.$error = {{myForm.userName.$error}}</tt><br>
              <tt>myForm.lastName.$valid = {{myForm.lastName.$valid}}</tt><br>
              <tt>myForm.lastName.$error = {{myForm.lastName.$error}}</tt><br>
              <tt>myForm.$valid = {{myForm.$valid}}</tt><br>
              <tt>myForm.$error.required = {{!!myForm.$error.required}}</tt><br>
              <tt>myForm.$error.minlength = {{!!myForm.$error.minlength}}</tt><br>
              <tt>myForm.$error.maxlength = {{!!myForm.$error.maxlength}}</tt><br>
            </div>
            </code>
          </div>
        </section>

        <section>
          <h2>Inaccessible Sites</h2>
          <img src="img/virgin-america-2015.png" alt="VirginAmerica.com" style="max-height: 580px;">
        </section>

        <section>
          <img src="img/depressed-snoopy.gif" alt="Snoopy sadly laying on top of his doghouse in the pouring rain" style="min-height: 640px;">
        </section>

        <section>
          <h2>Making it better</h2>
          <ul>
            <li>Submit feedback on websites</li>
            <li>Submit issues/pull requests via Github</li>
            <li>Create accessible examples</li>
            <li>Improve the framework</li>
            <li>Speaking, Always-on Advocacy</li>
            <li>
          </ul>
        </section>

        <section>
          <blockquote>
            <div class="blockquote-content">
              <span class="icon" aria-hidden="true"></span>
              <p>Please accept our sincere apologies for the accessibility problems you were having with our web site.</p>
   
              <p>Please be assured that your email has been shared with our Web Team. We will let them know that there are accessibility issues that prevent customers with disabilities from using our site.</p>
            </div>
            <cite>Virgin America Customer Service</cite>
          </blockquote>
        </section>

				<section>
					<h2>Creating Accessible Examples</h2>
					<ul>
            <li>Semantic HTML</li>
						<li>Keyboard focus styles</li>
						<li>Focus management</li>
            <li>Text alternatives</li>
            <li>Notifying the user</li>
					</ul>
					<aside class="notes">
          Handling focus: tabIndex, replacing part of the DOM causes focus mgmt probz

					*Graceful degradation is worth mentioning but it is outside the scope of this talk.
					</aside>
				</section>

				<section>
					<h2>Semantic HTML</h2>
          <pre><code class="html">
    &lt;button class="md-button" ng-click="doStuff()"&gt;
      Material Button
    &lt;/button&gt;
          </code></pre>
          <pre><code class="html">
    &lt;md-button role="button" tabIndex="0"
      ng-keypress="doStuff()" ng-click="doStuff()"&gt;
      Material Button
    &lt;/md-button&gt;
          </code></pre>
				</section>

				<section>
					<h2>No Visible Focus</h2>
          <p>(real life example)</p>
          <figure><pre><code class="css">
  .navlist--main > li > a {
    color: $white;
    display: block;

    &:hover {
      text-decoration: underline;
    }
  }
          </code></pre>
          <figcaption>Sass</figcaption>
          </figure>
        </section>

        <section>
          <h2 class="h3-style">You Had One Job</h2>
          <img src="img/keyboard-panda-1.gif" alt="Person in panda costume smashes keyboard on desk" style="min-height: 500px;">
        </section>

        <section data-transition="none">
          <h2>Visible Focus</h2>
          <figure><pre><code class="css">
  .navlist--main > li > a {
    color: $white;
    display: block;

    &:hover, &:focus {
      color: $somethingElse;
      text-decoration: underline;
    }
  }
          </code></pre>
          <figcaption>Sass</figcaption>
          </figure>
        </section>

        <section>
          <h2 class="h3-style">Focus Management</h2>
          <iframe title="MarcySutton.com Accessible Navigation" width="1120" height="720" src="https://www.youtube.com/embed/IkguYBkE9XA?rel=0" frameborder="0" allowfullscreen></iframe>
        </section>

        <section>
          <h2 class="h3-style">Focus Management</h2>
          <div>
            <pre><code class="javascript">
    var navButton = $('#global-menu'),
        navMenu = $('#global-nav');
    var navLinks = navMenu.find('a');

    // remove links from tab order by default
    navLinks.attr('tabIndex', '-1');

    navMenu.on('keydown', function(event) {
      // handle escape key
      if(event.keyCode === 27) {
        resetNav();
        navButton.focus();
      }
    });
    navButton.on('click', function(event) {
      if(document.body.classList.contains('active')) {
        resetNav();
      } else {
        document.body.classList.add('active');
        navLinks.eq(0).focus();
        navLinks.removeAttr('tabIndex');
      }
    });

    function resetNav() {
      document.body.classList.remove('active');
      navLinks.attr('tabIndex', '-1');
    }
            </code></pre>
          </div>
        </section>

        <section>
          <h2 class="h3-style">Text Alternatives</h2>
        </section>

        <section>
          <h2 class="h3-style">Notifying the User</h2>
          <pre><code class="html">
  &lt;live-region level="polite"&gt;&lt;/live-region&gt;
          </code></pre>
          <pre><code class="javascript" style="max-height: 540px;">
  function liveRegionDirective($scope, $element, $attrs) {
    element.attr({
      'role' : 'region',
      'aria-live': $attrs.level
    });
    $scope.$on('statusUpdated', function(scope, message) {
      $element.html(message.text);
    });
  }
          </code></pre>
        </section>

        <section>
          <h2 class="h1-style">Improve the framework</h2>
          <img src="img/AngularJS-Shield-large.png" class="plain" alt="AngularJS">
        </section>

				<section>
					<h2>ngAria</h2>
          <h3>A11Y Module in Angular 1.3+</h3>          
          <img src="img/Bandaid-on-heart.png" alt="Band-Aid on heart" class="plain">
          <p><a href="https://docs.angularjs.org/guide/accessibility" target="_blank" title="Link opens in a new window">https://docs.angularjs.org/guide/accessibility</a></p>
        </section>

        <section>
          <h2>ngAria</h2>
          <h3>Interfaces with the following directives:</h3>
          <p><strong>ngModel, ngDisabled, ngShow, ngHide, ngClick, ngDblClick</strong></p>
        </section>

        <section>
          <h2 class="h3-style">ngAria: ngModel Overrides</h2>
					<pre><code class="javascript" style="max-height: 750px;">
 function getRadioReaction() {
   if (needsTabIndex) {
     needsTabIndex = false;
     return function ngAriaRadioReaction(newVal) {
       var boolVal = newVal === attr.value;
       elem.attr('aria-checked', boolVal);
       elem.attr('tabindex', 0 - !boolVal);
     };
   ...
					</code></pre>
					<p><a href="https://docs.angularjs.org/api/ngAria" target="_blank" title="Link opens in a new window">https://docs.angularjs.org/api/ngAria</a></p>
				</section>

				<section>
					<h2>Angular.js Material Design</h2>
					<a href="https://material.angularjs.org/" target="_blank" title="Link opens in a new window"><img src="img/Angular-Material.png" alt="Angular.js Material Design" style="max-height: 640px;"></a>
					<aside class="notes">
						Here's how I practice what I preach
					</aside>
				</section>

				<section>
					<h2 class="h3-style">Material Checkbox (1/2)</h2>
					<div class="full-screen-code">
						<pre><code class="javascript" style="max-height: 640px;">
 // material.components.checkbox
 function MaterialCheckboxDirective($materialAria, ...) {
   tAttrs.tabIndex = 0;
   tElement.attr('role', 'checkbox');

   return function postLink(...) {
     $materialAria.expectAttribute(element, 'aria-label');

     function keypressListener(ev) {
      if (element[0].hasAttribute('disabled')) return;
     ...
						</code></pre>
					</div>
				</section>

				<section>
					<h2 class="h3-style">Material Checkbox (2/2)</h2>
					<div class="full-screen-code">
						<pre><code class="javascript" style="max-height: 640px;">
 // material.services.aria
 function expectAttribute(element, attrName, defaultValue) {
   var node = element[0];
   if (!node.hasAttribute(attrName)) {
     var hasDefault = angular.isDefined(defaultValue) && defaultValue.length;
     if (!hasDefault) {
       $log.warn(messageTemplate, attrName, getTagString(node));
       $log.warn(node);
     } else {
       element.attr(attrName, defaultValue.trim());
     }
   }
 }
						</code></pre>
					</div>
				</section>

        <section>
          <h2>Angular 2.0</h2>
        </section>
        
        <section>
          <h2 class="h3-style">Protractorâ€“Integration Testing</h2>
        
        </section>

				<section>
					<h2>Testing for Accessibility!</h2>
          <ul>
            <li>Check for Labels</li>
            <li>Validate Roles</li>
            <li>Watched ARIA Properties</li>
            <li>Interactions</li>
            <li>Color Contrast</li>
          </ul>
				</section>

        <section>
	        <h2 class="h3-style">Unit Testing</h2>
          <div class="full-screen-code">
            <pre><code class="javascript">
 // material/components/radioButton.spec.js
 describe('radioButton', function() {
  beforeEach(module('material.components.radioButton'));

  it('should be operable via arrow keys', inject(function($compile, $rootScope) {
    var element = $compile(
        '&lt;md-radio-group ng-model="color"&gt;' +
          '&lt;md-radio-button value="blue"&gt;&lt;/md-radio-button&gt;' +
          '&lt;md-radio-button value="green"&gt;&lt;/md-radio-button&gt;' +
        '&lt;/md-radio-group&gt;'
        )($rootScope);

    $rootScope.$apply(function(){
      $rootScope.color = 'blue';
    });

    var rbGroupElement = element.eq(0);
    TestUtil.triggerEvent(rbGroupElement, "keydown", {keyCode: Constant.KEY_CODE.RIGHT_ARROW});

    expect($rootScope.color).toEqual('green');
  }));
 });

  ...

  // material/config/test-utils.js
  var TestUtil = {
    triggerEvent: function (element, eventName, eventData) {
      eventData = eventData || {};
      var e = $.extend({}, $.Event(eventName), eventData);
      if(eventData.keyCode){
        e.which = eventData.keyCode;
      }
      element.trigger(e);
    }
  }
            </code></pre>
          </div>
        </section>

        <section>
          <h2>Resources</h2>
          <p><em>All links open in new windows</em></p>
          <ul>
            <li><a href="http://angularjs.blogspot.com/2014/11/using-ngaria.html" target="_blank" title="Link opens in a new window">Using ngAria</a></li>
            <li><a href="https://docs.angularjs.org/guide/accessibility" target="_blank" title="Link opens in a new window">ngAria Developer Guide</a></li>
            <!-- UPDATE PROTRACTOR LINK!! -->
            <li><a href="https://github.com/marcysutton/protractor" target="_blank" title="Link opens in a new window">Protractor Accessibility Plugin</a></li>
            <!--  -->
            <li><a href="http://unobfuscated.blogspot.com/2015/02/angularjs-accessibility-knocking-off-my.html" target="_blank" title="Link opens in a new window">Accessible TodoMVC by Dylan Barrell</a></li>
            <li><a href="https://github.com/dequelabs/ngA11y" target="_blank" title="Link opens in a new window">ngA11y by Deque</a></li>
          </ul>
        </section>

        <section>
          <h2 style="margin-top: 0.5em;">Thanks, CSUN!</h2>
        </section>
			</div>

			<footer>
        <p class="copyright">Developments in Angular.js Accessibility<br>
          <a href="http://twitter.com/marcysutton" target="_blank" title="Link opens in a new window">@marcysutton</a> <span aria-hidden="true">/</span> <a href="http://marcysutton.com" target="_blank" title="Link opens in a new window">MarcySutton.com</a></p>
      </footer>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>
		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				// The "normal" size of the presentation, aspect ratio will be preserved
		    // when the presentation is scaled to fit different resolutions. Can be
		    // specified using percentage units.
		    width: 1440,
		    height: 900,

		    // Factor of the display size that should remain empty around the content
		    margin: 0.1,

		    // Bounds for smallest/largest possible scale to apply to content
		    minScale: 0.2,
		    maxScale: 1.0,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: Reveal.getQueryHash().transition || 'fade', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/accessibility-helpers/accessibility-helpers.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'lib/js/slides.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});
		</script>
	</body>
</html>
